<!-- pages/myBought/myBought.wxml -->
<view class="collection-container">
  <custom-nav-bar title="我买到的" showBack="true" />

  <view style="padding-top: 88rpx;">
    <!-- 页面标题 -->
    <view class="page-header">
      <text class="page-title">我买到的</text>
    </view>

    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading-container">
      <loading />
      <text>加载中...</text>
    </view>

    <!-- 空状态 -->
    <view wx:elif="{{purchasedProducts.length === 0 && !loading}}" class="empty-container">
      <image class="empty-icon" src="/static/assets/icons/empty-collection.png" mode="aspectFit"></image>
      <text class="empty-text">暂无购买商品</text>
    </view>

    <!-- 商品列表 -->
    <view wx:else class="goods-list">
      <block wx:for="{{purchasedProducts}}" wx:key="productId">
        <!-- 修改为横向展示的卡片 -->
        <view class="goods-item-horizontal" bindtap="onGoodsTap" data-id="{{item.productId}}">
          <!-- 商品图片 -->
          <image class="goods-image-horizontal"
                 src="{{item.image || '/static/assets/default-image.png'}}"
                 mode="aspectFill"></image>

          <!-- 商品信息和卖家信息 -->
          <view class="goods-info-horizontal">
            <view class="goods-main-info">
              <text class="goods-title-horizontal">{{item.title}}</text>
              <text class="goods-price-horizontal">¥{{item.price}}</text>
              <view class="goods-meta-horizontal">
                <text class="goods-condition-horizontal">{{item.condition}}</text>
                <text class="goods-favorite-count-horizontal">{{item.favoriteCount || 0}}人收藏</text>
              </view>
            </view>

            <!-- 卖家信息 -->
            <view class="seller-info">
              <text class="seller-label">卖家信息:</text>
              <text class="seller-name">姓名: {{item.sellerName || '未知'}}</text>
              <text class="seller-phone">电话: {{item.sellerPhone || '未知'}}</text>
              <text class="seller-address">地址: {{item.sellerAddress || '未知'}}</text>
            </view>
          </view>
        </view>
      </block>
    </view>

  </view>
</view>
