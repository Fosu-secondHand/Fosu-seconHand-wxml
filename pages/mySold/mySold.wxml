<!--pages/myCollection/myCollection.wxml-->
<view class="collection-container">
  <custom-nav-bar title="我卖出的" showBack="true" />

  <view style="padding-top: 88rpx;">
    <!-- 页面标题 -->
    <view class="page-header">
      <text class="page-title">我卖出的</text>
    </view>

    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading-container">
      <loading />
      <text>加载中...</text>
    </view>

    <!-- 空状态 -->
    <view wx:elif="{{soldProducts.length === 0 && !loading}}" class="empty-container">
      <image class="empty-icon" src="/static/assets/icons/empty-collection.png" mode="aspectFit"></image>
      <text class="empty-text">暂无卖出商品</text>
    </view>

    <!-- 商品列表 -->
    <view wx:else class="goods-list">
      <block wx:for="{{soldProducts}}" wx:key="productId">
        <!-- 添加点击事件 bindtap="onGoodsTap" 和 data-id 属性 -->
        <view class="goods-item" bindtap="onGoodsTap" data-id="{{item.productId}}">
          <!-- 商品图片 -->
          <image class="goods-image"
                 src="{{item.image || '/static/assets/default-image.png'}}"
                 mode="aspectFill"></image>

          <!-- 商品信息 -->
          <view class="goods-info">
            <text class="goods-title">{{item.title}}</text>
            <text class="goods-price">¥{{item.price}}</text>
            <view class="goods-meta">
              <text class="goods-condition">{{item.condition}}</text>
              <text class="goods-favorite-count">{{item.favoriteCount || 0}}人收藏</text>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>
